{"version":3,"file":"list-items.mjs","sources":["../../../../../../../node_modules/vuetify/lib/composables/list-items.mjs"],"sourcesContent":["// Utilities\nimport { computed, shallowRef, watchEffect } from 'vue';\nimport { deepEqual, getPropertyFromItem, isPrimitive, omit, pick, propsFactory } from \"../util/index.mjs\"; // Types\n// Composables\nexport const makeItemsProps = propsFactory({\n  items: {\n    type: Array,\n    default: () => []\n  },\n  itemTitle: {\n    type: [String, Array, Function],\n    default: 'title'\n  },\n  itemValue: {\n    type: [String, Array, Function],\n    default: 'value'\n  },\n  itemChildren: {\n    type: [Boolean, String, Array, Function],\n    default: 'children'\n  },\n  itemProps: {\n    type: [Boolean, String, Array, Function],\n    default: 'props'\n  },\n  returnObject: Boolean,\n  valueComparator: Function\n}, 'list-items');\nexport function transformItem(props, item) {\n  const title = getPropertyFromItem(item, props.itemTitle, item);\n  const value = getPropertyFromItem(item, props.itemValue, title);\n  const children = getPropertyFromItem(item, props.itemChildren);\n  const itemProps = props.itemProps === true ? typeof item === 'object' && item != null && !Array.isArray(item) ? 'children' in item ? omit(item, ['children']) : item : undefined : getPropertyFromItem(item, props.itemProps);\n  const _props = {\n    title,\n    value,\n    ...itemProps\n  };\n  return {\n    title: String(_props.title ?? ''),\n    value: _props.value,\n    props: _props,\n    children: Array.isArray(children) ? transformItems(props, children) : undefined,\n    raw: item\n  };\n}\nexport function transformItems(props, items) {\n  const _props = pick(props, ['itemTitle', 'itemValue', 'itemChildren', 'itemProps', 'returnObject', 'valueComparator']);\n  const array = [];\n  for (const item of items) {\n    array.push(transformItem(_props, item));\n  }\n  return array;\n}\nexport function useItems(props) {\n  const items = computed(() => transformItems(props, props.items));\n  const hasNullItem = computed(() => items.value.some(item => item.value === null));\n  const itemsMap = shallowRef(new Map());\n  const keylessItems = shallowRef([]);\n  watchEffect(() => {\n    const _items = items.value;\n    const map = new Map();\n    const keyless = [];\n    for (let i = 0; i < _items.length; i++) {\n      const item = _items[i];\n      if (isPrimitive(item.value) || item.value === null) {\n        let values = map.get(item.value);\n        if (!values) {\n          values = [];\n          map.set(item.value, values);\n        }\n        values.push(item);\n      } else {\n        keyless.push(item);\n      }\n    }\n    itemsMap.value = map;\n    keylessItems.value = keyless;\n  });\n  function transformIn(value) {\n    // Cache unrefed values outside the loop,\n    // proxy getters can be slow when you call them a billion times\n    const _items = itemsMap.value;\n    const _allItems = items.value;\n    const _keylessItems = keylessItems.value;\n    const _hasNullItem = hasNullItem.value;\n    const _returnObject = props.returnObject;\n    const hasValueComparator = !!props.valueComparator;\n    const valueComparator = props.valueComparator || deepEqual;\n    const _props = pick(props, ['itemTitle', 'itemValue', 'itemChildren', 'itemProps', 'returnObject', 'valueComparator']);\n    const returnValue = [];\n    main: for (const v of value) {\n      // When the model value is null, return an InternalItem\n      // based on null only if null is one of the items\n      if (!_hasNullItem && v === null) continue;\n\n      // String model value means value is a custom input value from combobox\n      // Don't look up existing items if the model value is a string\n      if (_returnObject && typeof v === 'string') {\n        returnValue.push(transformItem(_props, v));\n        continue;\n      }\n\n      // Fast path, items with primitive values and no\n      // custom valueComparator can use a constant-time\n      // map lookup instead of searching the items array\n      const fastItems = _items.get(v);\n\n      // Slow path, always use valueComparator.\n      // This is O(n^2) so we really don't want to\n      // do it for more than a couple hundred items.\n      if (hasValueComparator || !fastItems) {\n        for (const item of hasValueComparator ? _allItems : _keylessItems) {\n          if (valueComparator(v, item.value)) {\n            returnValue.push(item);\n            continue main;\n          }\n        }\n        // Not an existing item, construct it from the model (#4000)\n        returnValue.push(transformItem(_props, v));\n        continue;\n      }\n      returnValue.push(...fastItems);\n    }\n    return returnValue;\n  }\n  function transformOut(value) {\n    return props.returnObject ? value.map(_ref => {\n      let {\n        raw\n      } = _ref;\n      return raw;\n    }) : value.map(_ref2 => {\n      let {\n        value\n      } = _ref2;\n      return value;\n    });\n  }\n  return {\n    items,\n    transformIn,\n    transformOut\n  };\n}\n//# sourceMappingURL=list-items.mjs.map"],"names":["value"],"mappings":"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","x_google_ignoreList":[0]}