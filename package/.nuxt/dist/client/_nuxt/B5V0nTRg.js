import{d as at,e as u,h as N,i as ot,c as k,r as n,w as o,a as t,b as l,f as d,m as nt,g as it,j as lt,F as rt,t as s,k as st,o as T,_ as dt}from"./BRxAjNlp.js";const ct={class:"d-flex flex-wrap align-center gap-4"},ut={class:"d-flex flex-wrap align-center gap-2"},pt={class:"text-overline"},mt={class:"text-h4 font-weight-bold"},vt={class:"font-weight-bold"},_t={class:"text-caption"},yt={class:"font-weight-bold"},gt={class:"ms-1 text-caption"},ft={class:"text-h5"},bt={class:"text-h6"},Tt={class:"font-weight-bold"},xt=at({__name:"B2BOrders",setup(Pt){const C=u(!0),x=u(""),B=u([]),D=u(""),A=["Tutti","Ristorante","Trattoria","Hotel","Pizzeria","Catering"],F=["Tutti","Completed","Processing","Pending"],v=u("Tutti"),_=u("Tutti"),r=u(null),y=u(!1),R=[{title:"Venditore",key:"vendorName",align:"start"},{title:"Data Ordine",key:"date",class:"d-none d-md-table-cell"},{title:"Totale",key:"total",align:"end"},{title:"Stato Ordine",key:"status",align:"center"},{title:"Stato Pagamento",key:"paymentStatus",align:"center"},{title:"Ricorrente",key:"recurring",align:"center",class:"d-none d-lg-table-cell"},{title:"Azioni",key:"actions",align:"center",sortable:!1}],U=[{title:"Prodotto",key:"product",align:"start"},{title:"Quantità",key:"quantity",align:"end"},{title:"Prezzo Unitario",key:"price",align:"end"},{title:"Totale Riga",key:"total",align:"end"}],S=N(()=>B.value.filter(i=>{const a=v.value==="Tutti"||i.vendorType===v.value,m=_.value==="Tutti"||i.status===_.value;return a&&m})),g=N(()=>S.value.reduce((i,a)=>(i.totalOrders+=1,i.totalAmount+=a.total,a.paymentStatus==="Paid"?i.paidAmount+=a.total:i.pendingAmount+=a.total,i),{totalOrders:0,totalAmount:0,paidAmount:0,pendingAmount:0})),L=i=>({Completed:"success",Processing:"primary",Pending:"warning"})[i],E=i=>({Paid:"success",Pending:"warning","Not Paid":"error"})[i],p=i=>new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(i),q=i=>new Date(i).toLocaleDateString("it-IT"),M=i=>{r.value=i,y.value=!0},w=()=>y.value=!1,H=()=>{},G=()=>alert("Funzionalità PDF in sviluppo"),$=()=>{D.value=new Date().toLocaleString("it-IT")};return ot(()=>{setTimeout(()=>{B.value=[{id:"B2B-001",vendorId:"V001",vendorName:"Ristorante Da Luigi",vendorType:"Ristorante",date:"2025-10-11",total:1250.75,status:"Completed",paymentStatus:"Paid",paymentType:"Bonifico",items:[{product:"Pomodori San Marzano",quantity:20,price:3.5,total:70},{product:"Mozzarella di Bufala",quantity:15,price:8.5,total:127.5},{product:"Olio Extra Vergine",quantity:10,price:12.5,total:125}],deliveryDate:"2025-10-13",recurring:!0,frequency:"Settimanale"},{id:"B2B-002",vendorId:"V002",vendorName:"Trattoria Bella Italia",vendorType:"Trattoria",date:"2025-10-10",total:980.5,status:"Processing",paymentStatus:"Pending",paymentType:"Bonifico",items:[{product:"Parmigiano Reggiano",quantity:5,price:22,total:110},{product:"Prosciutto di Parma",quantity:8,price:18.5,total:148},{product:"Vino Rosso",quantity:12,price:15,total:180}],deliveryDate:"2025-10-12",recurring:!0,frequency:"Bisettimanale"},{id:"B2B-003",vendorId:"V003",vendorName:"Hotel Milano",vendorType:"Hotel",date:"2025-10-10",total:1850.25,status:"Completed",paymentStatus:"Paid",paymentType:"Carta di Credito",items:[{product:"Frutta Mista",quantity:50,price:2.5,total:125},{product:"Verdure Assortite",quantity:40,price:3,total:120},{product:"Formaggi Locali",quantity:15,price:10,total:150}],deliveryDate:"2025-10-11",recurring:!0,frequency:"Giornaliero"},{id:"B2B-004",vendorId:"V004",vendorName:"Pizzeria Napoli",vendorType:"Pizzeria",date:"2025-10-09",total:750,status:"Processing",paymentStatus:"Pending",paymentType:"Bonifico",items:[{product:"Farina Tipo 00",quantity:30,price:2.5,total:75},{product:"Pomodori Pelati",quantity:40,price:1.8,total:72},{product:"Mozzarella",quantity:25,price:5,total:125}],deliveryDate:"2025-10-11",recurring:!0,frequency:"Settimanale"},{id:"B2B-005",vendorId:"V005",vendorName:"Catering Eventi",vendorType:"Catering",date:"2025-10-08",total:2500,status:"Pending",paymentStatus:"Not Paid",paymentType:"Bonifico",items:[{product:"Carne Selezionata",quantity:20,price:25,total:500},{product:"Pesce Fresco",quantity:15,price:30,total:450},{product:"Vini Pregiati",quantity:10,price:35,total:350}],deliveryDate:"2025-10-18",recurring:!1,frequency:"Una Tantum"}],D.value=new Date().toLocaleString("it-IT"),C.value=!1},1e3)}),(i,a)=>{const m=n("v-spacer"),z=n("v-select"),f=n("v-btn"),c=n("v-list-item"),j=n("v-list"),Q=n("v-menu"),P=n("v-card"),V=n("v-col"),O=n("v-row"),J=n("v-card-item"),b=n("v-divider"),K=n("v-text-field"),W=n("v-skeleton-loader"),I=n("v-chip"),X=n("v-icon"),h=n("v-data-table"),Y=n("v-card-title"),Z=n("v-card-text"),tt=n("v-card-actions"),et=n("v-dialog");return T(),k(P,null,{default:o(()=>[t(J,{class:"pa-4 pa-md-6"},{default:o(()=>[l("div",ct,[a[7]||(a[7]=l("div",null,[l("h2",{class:"text-h5"},"Gestione Ordini B2B"),l("p",{class:"text-subtitle-1 text-medium-emphasis"},"Filtra e analizza gli ordini business")],-1)),t(m),l("div",ut,[t(z,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e),items:A,label:"Tipo Venditore",density:"compact",variant:"outlined","hide-details":"",style:{"min-width":"150px"}},null,8,["modelValue"]),t(z,{modelValue:_.value,"onUpdate:modelValue":a[1]||(a[1]=e=>_.value=e),items:F,label:"Stato Ordine",density:"compact",variant:"outlined","hide-details":"",style:{"min-width":"150px"}},null,8,["modelValue"]),t(Q,null,{activator:o(({props:e})=>[t(f,nt({icon:"mdi-dots-vertical"},e),null,16)]),default:o(()=>[t(j,null,{default:o(()=>[t(c,{onClick:$,"prepend-icon":"mdi-refresh"},{default:o(()=>a[4]||(a[4]=[d("Aggiorna")])),_:1}),t(c,{onClick:H,"prepend-icon":"mdi-file-delimited"},{default:o(()=>a[5]||(a[5]=[d("Esporta CSV")])),_:1}),t(c,{onClick:G,"prepend-icon":"mdi-file-pdf-box"},{default:o(()=>a[6]||(a[6]=[d("Esporta PDF")])),_:1})]),_:1})]),_:1})])]),t(O,{class:"mt-4"},{default:o(()=>[(T(!0),it(rt,null,lt([{label:"Ordini Filtrati",value:g.value.totalOrders,format:e=>e},{label:"Importo Totale",value:g.value.totalAmount,format:p,color:"primary"},{label:"Importo Pagato",value:g.value.paidAmount,format:p,color:"success"},{label:"Importo In Attesa",value:g.value.pendingAmount,format:p,color:"warning"}],e=>(T(),k(V,{key:e.label,cols:"12",sm:"6",md:"3"},{default:o(()=>[t(P,{variant:"tonal",color:e.color,class:"pa-4 text-center h-100"},{default:o(()=>[l("div",pt,s(e.label),1),l("div",mt,s(e.format(e.value)),1)]),_:2},1032,["color"])]),_:2},1024))),128))]),_:1})]),_:1}),t(b),t(K,{modelValue:x.value,"onUpdate:modelValue":a[2]||(a[2]=e=>x.value=e),label:"Cerca per nome venditore o ID...","prepend-inner-icon":"mdi-magnify",variant:"solo-filled",flat:"","hide-details":"","single-line":""},null,8,["modelValue"]),t(h,{headers:R,items:S.value,search:x.value,loading:C.value,"item-value":"id",class:"elevation-0","sort-by":[{key:"date",order:"desc"}]},{loading:o(()=>[t(W,{type:"table-row@5"})]),"item.vendorName":o(({item:e})=>[l("div",vt,s(e.vendorName),1),l("div",_t,s(e.vendorType),1)]),"item.total":o(({value:e})=>[l("span",yt,s(p(e)),1)]),"item.status":o(({value:e})=>[t(I,{color:L(e),size:"small"},{default:o(()=>[d(s(e),1)]),_:2},1032,["color"])]),"item.paymentStatus":o(({value:e})=>[t(I,{color:E(e),size:"small"},{default:o(()=>[d(s(e),1)]),_:2},1032,["color"])]),"item.recurring":o(({item:e})=>[t(X,{color:e.recurring?"success":"grey-lighten-1"},{default:o(()=>[d(s(e.recurring?"mdi-check-circle":"mdi-close-circle"),1)]),_:2},1032,["color"]),l("span",gt,s(e.frequency),1)]),"item.actions":o(({item:e})=>[t(f,{icon:"mdi-eye-outline",variant:"text",size:"small",onClick:Vt=>M(e)},null,8,["onClick"])]),"no-data":o(()=>a[8]||(a[8]=[l("div",{class:"pa-4 text-center"},"Nessun ordine trovato con i filtri attuali.",-1)])),_:1},8,["items","search","loading"]),t(et,{modelValue:y.value,"onUpdate:modelValue":a[3]||(a[3]=e=>y.value=e),"max-width":"900px",scrollable:""},{default:o(()=>[r.value?(T(),k(P,{key:0},{default:o(()=>[t(Y,{class:"d-flex align-center pa-4"},{default:o(()=>[l("span",ft,"Dettaglio Ordine "+s(r.value.id),1),t(m),t(f,{icon:"mdi-close",variant:"text",onClick:w})]),_:1}),t(b),t(Z,null,{default:o(()=>[t(O,null,{default:o(()=>[t(V,{cols:"12",md:"6"},{default:o(()=>[a[9]||(a[9]=l("div",{class:"text-overline"},"Informazioni Ordine",-1)),t(c,{title:r.value.id,subtitle:"ID Ordine","prepend-icon":"mdi-identifier"},null,8,["title"]),t(c,{title:q(r.value.date),subtitle:"Data Ordine","prepend-icon":"mdi-calendar-start"},null,8,["title"]),t(c,{title:q(r.value.deliveryDate),subtitle:"Data Consegna","prepend-icon":"mdi-truck-delivery"},null,8,["title"])]),_:1}),t(V,{cols:"12",md:"6"},{default:o(()=>[a[10]||(a[10]=l("div",{class:"text-overline"},"Informazioni Venditore",-1)),t(c,{title:r.value.vendorName,subtitle:r.value.vendorId,"prepend-icon":"mdi-storefront-outline"},null,8,["title","subtitle"]),t(c,{title:r.value.vendorType,subtitle:"Tipo Venditore","prepend-icon":"mdi-tag-outline"},null,8,["title"]),t(c,{title:r.value.frequency,subtitle:`Ordine ${r.value.recurring?"ricorrente":"singolo"}`,"prepend-icon":"mdi-sync"},null,8,["title","subtitle"])]),_:1})]),_:1}),t(b,{class:"my-4"}),a[11]||(a[11]=l("h3",{class:"text-h6 mb-2"},"Prodotti Ordinati",-1)),t(h,{headers:U,items:r.value.items,density:"compact",class:"border rounded"},{"item.price":o(({value:e})=>[d(s(p(e)),1)]),"item.total":o(({value:e})=>[d(s(p(e)),1)]),_:1},8,["items"])]),_:1}),t(b),t(tt,{class:"pa-4"},{default:o(()=>[l("div",bt,[a[12]||(a[12]=d("Totale: ")),l("span",Tt,s(p(r.value.total)),1)]),t(m),t(f,{color:"primary",variant:"tonal",onClick:w},{default:o(()=>a[13]||(a[13]=[d("Chiudi")])),_:1})]),_:1})]),_:1})):st("",!0)]),_:1},8,["modelValue"])]),_:1})}}}),Ct=dt(xt,[["__scopeId","data-v-11dcbab5"]]);export{Ct as B};
