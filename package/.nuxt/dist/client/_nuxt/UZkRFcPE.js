import{d as U,r as u,p as g,a as Y,c as l,e as h,f as y,i as a,j as o,k as i,l as c,q as $,m as j,s as G,F as H,u as s,_ as J}from"./CCcdX0hl.js";const K={class:"d-flex flex-wrap align-center gap-4"},Q={class:"d-flex flex-wrap align-center gap-2"},W={class:"d-flex align-center"},X={class:"text-overline"},Z={class:"text-h5 font-weight-bold"},ee={class:"text-h6"},te=U({__name:"EnvironmentalImpact",setup(ae){const f=u(!0),_=u(""),p=u([]),S=u(""),x=g(()=>[...new Set(p.value.map(n=>n.year))]),d=u(new Date().getFullYear()),w=g(()=>p.value.filter(n=>n.year===d.value)),P=[{key:"co2Saved",label:"CO2 Risparmiata",unit:"kg",icon:"mdi-molecule-co2",color:"success",type:"sum"},{key:"plasticSaved",label:"Plastica Risparmiata",unit:"kg",icon:"mdi-recycle-variant",color:"info",type:"sum"},{key:"waterSaved",label:"Acqua Risparmiata",unit:"L",icon:"mdi-water-outline",color:"primary",type:"sum"},{key:"localProducts",label:"Prodotti Locali",unit:"%",icon:"mdi-map-marker-outline",color:"teal",type:"avg"},{key:"organicProducts",label:"Prodotti Biologici",unit:"%",icon:"mdi-leaf-outline",color:"green",type:"avg"},{key:"deliveryDistance",label:"Distanza Consegne",unit:"km",icon:"mdi-truck-outline",color:"warning",type:"sum"},{key:"deliveryEmissions",label:"Emissioni Consegne",unit:"kg CO₂",icon:"mdi-factory",color:"error",type:"sum"}],D=g(()=>{const n=p.value;return n.length===0?[]:P.map(t=>{let r=0;return t.type==="sum"?r=n.reduce((m,v)=>m+v[t.key],0):t.type==="avg"&&(r=n.reduce((m,v)=>m+v[t.key],0)/n.length),{...t,value:r}})}),C=[{title:"Mese",key:"month",align:"start"},{title:"CO₂ Risparm. (kg)",key:"co2Saved",align:"end"},{title:"Plastica (kg)",key:"plasticSaved",align:"end"},{title:"Acqua (L)",key:"waterSaved",align:"end"},{title:"Prod. Locali (%)",key:"localProducts",align:"end"},{title:"Prod. Bio (%)",key:"organicProducts",align:"end",class:"d-none d-sm-table-cell"},{title:"Distanza (km)",key:"deliveryDistance",align:"end",class:"d-none d-md-table-cell"},{title:"Emissioni (kg CO₂)",key:"deliveryEmissions",align:"end",class:"d-none d-md-table-cell"}],E=(n,t)=>`${t==="%"?n.toFixed(1):n.toLocaleString("it-IT")} ${t}`,L=()=>{},I=()=>{S.value=new Date().toLocaleString("it-IT")};return Y(()=>{setTimeout(()=>{p.value=[{month:"Gennaio",year:2025,co2Saved:1250,plasticSaved:320,waterSaved:5600,localProducts:85,organicProducts:62,deliveryDistance:1200,deliveryEmissions:180},{month:"Febbraio",year:2025,co2Saved:1320,plasticSaved:350,waterSaved:6100,localProducts:88,organicProducts:65,deliveryDistance:1350,deliveryEmissions:195},{month:"Marzo",year:2025,co2Saved:1450,plasticSaved:380,waterSaved:6500,localProducts:90,organicProducts:70,deliveryDistance:1400,deliveryEmissions:210},{month:"Aprile",year:2025,co2Saved:1380,plasticSaved:360,waterSaved:6200,localProducts:87,organicProducts:68,deliveryDistance:1380,deliveryEmissions:200},{month:"Maggio",year:2025,co2Saved:1520,plasticSaved:400,waterSaved:6800,localProducts:92,organicProducts:72,deliveryDistance:1450,deliveryEmissions:220}],d.value=2025,S.value=new Date().toLocaleString("it-IT"),f.value=!1},1e3)}),(n,t)=>{const r=l("v-spacer"),m=l("v-select"),v=l("v-btn"),k=l("v-list-item"),T=l("v-list"),V=l("v-menu"),M=l("v-avatar"),b=l("v-card"),A=l("v-col"),B=l("v-row"),z=l("v-card-item"),F=l("v-divider"),N=l("v-text-field"),O=l("v-card-title"),R=l("v-skeleton-loader"),q=l("v-data-table");return y(),h(b,null,{default:a(()=>[o(z,{class:"pa-4 pa-md-6"},{default:a(()=>[i("div",K,[t[4]||(t[4]=i("div",null,[i("h2",{class:"text-h5"},"Dashboard Impatto Ambientale"),i("p",{class:"text-subtitle-1 text-medium-emphasis"},"Metriche di sostenibilità aggregate e mensili")],-1)),o(r),i("div",Q,[o(m,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),items:x.value,label:"Anno",density:"compact",variant:"outlined","hide-details":"",style:{"min-width":"120px"}},null,8,["modelValue","items"]),o(V,null,{activator:a(({props:e})=>[o(v,$({icon:"mdi-dots-vertical"},e),null,16)]),default:a(()=>[o(T,null,{default:a(()=>[o(k,{onClick:I,"prepend-icon":"mdi-refresh"},{default:a(()=>t[2]||(t[2]=[c("Aggiorna")])),_:1}),o(k,{onClick:L,"prepend-icon":"mdi-file-delimited"},{default:a(()=>t[3]||(t[3]=[c("Esporta CSV")])),_:1})]),_:1})]),_:1})])]),o(B,{class:"mt-4"},{default:a(()=>[(y(!0),j(H,null,G(D.value,e=>(y(),h(A,{key:e.key,cols:"12",sm:"6",md:"4",lg:"3"},{default:a(()=>[o(b,{variant:"tonal",color:e.color,class:"pa-3 h-100"},{default:a(()=>[i("div",W,[o(M,{icon:e.icon,color:e.color,variant:"tonal",size:"40",class:"me-3"},null,8,["icon","color"]),i("div",null,[i("div",X,s(e.label),1),i("div",Z,s(E(e.value,e.unit)),1)])])]),_:2},1032,["color"])]),_:2},1024))),128))]),_:1})]),_:1}),o(F),o(O,{class:"d-flex align-center"},{default:a(()=>[i("h3",ee,"Dettaglio Mensile per l'anno "+s(d.value),1),o(r),o(N,{modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=e=>_.value=e),label:"Cerca mese...","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":"",style:{"max-width":"250px"}},null,8,["modelValue"])]),_:1}),o(q,{headers:C,items:w.value,search:_.value,loading:f.value,"item-value":"month",class:"elevation-0"},{loading:a(()=>[o(R,{type:"table-row@5"})]),"item.co2Saved":a(({value:e})=>[c(s(e.toLocaleString("it-IT")),1)]),"item.plasticSaved":a(({value:e})=>[c(s(e.toLocaleString("it-IT")),1)]),"item.waterSaved":a(({value:e})=>[c(s(e.toLocaleString("it-IT")),1)]),"item.localProducts":a(({value:e})=>[c(s(e),1)]),"item.organicProducts":a(({value:e})=>[c(s(e),1)]),"item.deliveryDistance":a(({value:e})=>[c(s(e.toLocaleString("it-IT")),1)]),"item.deliveryEmissions":a(({value:e})=>[c(s(e.toLocaleString("it-IT")),1)]),"no-data":a(()=>t[5]||(t[5]=[i("div",{class:"pa-4 text-center"},"Nessun dato trovato per l'anno selezionato.",-1)])),_:1},8,["items","search","loading"])]),_:1})}}}),le=J(te,[["__scopeId","data-v-2096c103"]]);export{le as E};
