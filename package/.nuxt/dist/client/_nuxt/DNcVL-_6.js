import{d as q,r as d,p as f,a as Z,c as n,e as H,f as J,i as o,j as t,k as l,l as h,q as K,u as r,_ as Q}from"./CCcdX0hl.js";const W={class:"d-flex flex-wrap align-center gap-4"},X={class:"d-flex flex-wrap align-center gap-2"},Y={class:"text-h4 font-weight-bold"},$={class:"text-h4 font-weight-bold"},ee={class:"text-h4 font-weight-bold"},te={class:"d-flex align-center pa-2"},oe={class:"font-weight-bold"},ne={class:"text-caption"},ae=q({__name:"RiderDeliveries",setup(le){const x=d(!0),b=d([]),u=d(""),y=d(""),v=d("Ottobre"),k=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],C=[{title:"Rider",key:"name",align:"start"},{title:"Consegne",key:"monthlyDeliveries.count",align:"center"},{title:"Puntualità",key:"onTimePercentage",align:"center"},{title:"Rating",key:"rating",align:"center",class:"d-none d-md-table-cell"},{title:"Veicolo",key:"vehicle",class:"d-none d-lg-table-cell"},{title:"Zona",key:"zone",class:"d-none d-lg-table-cell"}],D=f(()=>b.value.map(a=>{const e=a.deliveries.find(_=>_.month===v.value)||{month:v.value,count:0,onTime:0,late:0},s=e.count>0?e.onTime/e.count*100:0;return{...a,monthlyDeliveries:e,onTimePercentage:s}}).sort((a,e)=>e.monthlyDeliveries.count-a.monthlyDeliveries.count)),c=f(()=>D.value.reduce((a,e)=>(a.totalDeliveries+=e.monthlyDeliveries.count,a.onTime+=e.monthlyDeliveries.onTime,a.late+=e.monthlyDeliveries.late,a),{totalDeliveries:0,onTime:0,late:0})),p=f(()=>c.value.totalDeliveries===0?0:c.value.onTime/c.value.totalDeliveries*100),P=a=>a>=95?"success":a>=90?"primary":"warning",z=a=>a>90?"success":a>75?"warning":"error",V=()=>{},M=()=>alert("Funzionalità PDF in sviluppo"),S=()=>{y.value=new Date().toLocaleString("it-IT")};return Z(()=>{setTimeout(()=>{b.value=[{id:1,name:"Marco Rossi",avatar:"https://cdn.vuetifyjs.com/images/avatars/avatar-1.png",deliveries:[{month:"Ottobre",count:60,onTime:58,late:2}],rating:4.8,vehicle:"Bicicletta elettrica",zone:"Milano Centro"},{id:2,name:"Giulia Bianchi",avatar:"https://cdn.vuetifyjs.com/images/avatars/avatar-2.png",deliveries:[{month:"Ottobre",count:50,onTime:47,late:3}],rating:4.7,vehicle:"Scooter elettrico",zone:"Milano Nord"},{id:3,name:"Luca Verdi",avatar:"https://cdn.vuetifyjs.com/images/avatars/avatar-3.png",deliveries:[{month:"Ottobre",count:65,onTime:62,late:3}],rating:4.9,vehicle:"Bicicletta elettrica",zone:"Milano Est"},{id:4,name:"Sofia Neri",avatar:"https://cdn.vuetifyjs.com/images/avatars/avatar-4.png",deliveries:[{month:"Ottobre",count:58,onTime:55,late:3}],rating:4.6,vehicle:"Scooter elettrico",zone:"Milano Sud"},{id:5,name:"Alessandro Gialli",avatar:"https://cdn.vuetifyjs.com/images/avatars/avatar-5.png",deliveries:[{month:"Ottobre",count:60,onTime:58,late:2}],rating:4.8,vehicle:"Bicicletta elettrica",zone:"Milano Ovest"}],y.value=new Date().toLocaleString("it-IT"),x.value=!1},1e3)}),(a,e)=>{const s=n("v-spacer"),_=n("v-select"),T=n("v-btn"),w=n("v-list-item"),O=n("v-list"),B=n("v-menu"),m=n("v-card"),g=n("v-col"),F=n("v-progress-linear"),N=n("v-row"),R=n("v-card-item"),j=n("v-divider"),G=n("v-text-field"),L=n("v-skeleton-loader"),A=n("v-avatar"),E=n("v-chip"),I=n("v-rating"),U=n("v-data-table");return J(),H(m,null,{default:o(()=>[t(R,{class:"pa-4 pa-md-6"},{default:o(()=>[l("div",W,[e[4]||(e[4]=l("div",null,[l("h2",{class:"text-h5"},"Performance Rider"),l("p",{class:"text-subtitle-1 text-medium-emphasis"},"Statistiche mensili delle consegne")],-1)),t(s),l("div",X,[t(_,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=i=>v.value=i),items:k,label:"Mese",density:"compact",variant:"outlined","hide-details":"",style:{"min-width":"140px"}},null,8,["modelValue"]),t(T,{icon:"mdi-refresh",onClick:S,title:"Aggiorna"}),t(B,null,{activator:o(({props:i})=>[t(T,K({icon:"mdi-export-variant"},i,{title:"Esporta"}),null,16)]),default:o(()=>[t(O,null,{default:o(()=>[t(w,{onClick:V,"prepend-icon":"mdi-file-delimited"},{default:o(()=>e[2]||(e[2]=[h("Esporta CSV")])),_:1}),t(w,{onClick:M,"prepend-icon":"mdi-file-pdf-box"},{default:o(()=>e[3]||(e[3]=[h("Esporta PDF")])),_:1})]),_:1})]),_:1})])]),t(N,{class:"mt-4"},{default:o(()=>[t(g,{cols:"12",sm:"4"},{default:o(()=>[t(m,{variant:"tonal",class:"d-flex flex-column pa-4 text-center h-100"},{default:o(()=>[t(s),l("div",Y,r(c.value.totalDeliveries),1),e[5]||(e[5]=l("div",{class:"text-body-1"},"Consegne Totali",-1)),t(s)]),_:1})]),_:1}),t(g,{cols:"12",sm:"4"},{default:o(()=>[t(m,{variant:"tonal",color:"success",class:"d-flex flex-column pa-4 text-center h-100"},{default:o(()=>[t(s),l("div",$,r(c.value.onTime),1),e[6]||(e[6]=l("div",{class:"text-body-1"},"Puntuali",-1)),t(s)]),_:1})]),_:1}),t(g,{cols:"12",sm:"4"},{default:o(()=>[t(m,{variant:"tonal",class:"d-flex flex-column pa-4 text-center h-100"},{default:o(()=>[l("div",ee,r(p.value.toFixed(1))+"%",1),e[7]||(e[7]=l("div",{class:"text-body-1 mb-2"},"Puntualità Globale",-1)),t(s),t(F,{"model-value":p.value,color:z(p.value),height:"8",rounded:"",class:"mt-auto"},null,8,["model-value","color"])]),_:1})]),_:1})]),_:1})]),_:1}),t(j),t(G,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=i=>u.value=i),label:"Cerca rider per nome, veicolo o zona...","prepend-inner-icon":"mdi-magnify",variant:"solo-filled",flat:"","hide-details":"","single-line":""},null,8,["modelValue"]),t(U,{headers:C,items:D.value,search:u.value,loading:x.value,"item-value":"id",class:"elevation-0"},{loading:o(()=>[t(L,{type:"table-row@5"})]),"item.name":o(({item:i})=>[l("div",te,[t(A,{image:i.avatar,size:"40",class:"me-3"},null,8,["image"]),l("div",null,[l("div",oe,r(i.name),1),l("div",ne,r(i.id),1)])])]),"item.onTimePercentage":o(({value:i})=>[t(E,{color:P(i),size:"small",class:"font-weight-bold"},{default:o(()=>[h(r(i.toFixed(1))+"% ",1)]),_:2},1032,["color"])]),"item.rating":o(({value:i})=>[t(I,{"model-value":i,color:"amber",density:"compact",size:"small",readonly:"","half-increments":""},null,8,["model-value"])]),"no-data":o(()=>e[8]||(e[8]=[l("div",{class:"pa-4 text-center"},"Nessun dato disponibile per il mese selezionato.",-1)])),_:1},8,["items","search","loading"])]),_:1})}}}),se=Q(ae,[["__scopeId","data-v-2b9807c9"]]);export{se as R};
