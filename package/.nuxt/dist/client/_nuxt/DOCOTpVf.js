import{d as q,r as m,p as g,a as G,c as l,e as R,f as H,i as o,j as e,k as n,l as x,q as J,u as d,_ as K}from"./CCcdX0hl.js";const O={class:"d-flex flex-wrap align-center gap-4"},Q={class:"d-flex flex-wrap align-center gap-2"},W={class:"text-h3 font-weight-bold"},X={class:"text-h3 font-weight-bold"},Y={class:"d-flex align-center font-weight-bold py-2"},Z={style:{"min-width":"120px"}},$={class:"text-caption text-medium-emphasis"},tt={class:"font-weight-bold"},et={style:{"min-width":"120px"}},ot={class:"text-caption text-medium-emphasis"},nt=q({__name:"PaymentTypes",setup(at){const C=m(!0),p=m(""),u=m([]),r=m(null),h=m(""),T=[{title:"Tipo Pagamento",key:"type",align:"start"},{title:"N. Transazioni",key:"count",align:"center"},{title:"% Transazioni",key:"countPercentage",align:"start",sortable:!1},{title:"Importo Totale",key:"amount",align:"end"},{title:"% Importo",key:"amountPercentage",align:"start",sortable:!1}],D=g(()=>u.value.map(i=>{const t=new Date(i.date);return{value:i.date,title:t.toLocaleDateString("it-IT",{weekday:"long",day:"numeric",month:"long"})}}).reverse()),v=g(()=>{const i=u.value.find(t=>t.date===r.value);return i?i.payments.reduce((t,c)=>(t.totalCount+=c.count,t.totalAmount+=c.amount,t),{totalCount:0,totalAmount:0}):{totalCount:0,totalAmount:0}}),k=g(()=>{const i=u.value.find(s=>s.date===r.value);if(!i)return[];const{totalCount:t,totalAmount:c}=v.value;return t===0||c===0?[]:i.payments.map(s=>({...s,countPercentage:s.count/t*100,amountPercentage:s.amount/c*100})).sort((s,_)=>_.amount-s.amount)}),S=i=>({"Carta di Credito":"mdi-credit-card-outline",PayPal:"mdi-paypal",Bonifico:"mdi-bank-outline",Contanti:"mdi-cash-multiple",Satispay:"mdi-cellphone"})[i]||"mdi-help-circle-outline",P=i=>new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(i),I=()=>{},V=()=>alert("FunzionalitÃ  PDF in sviluppo"),B=()=>{h.value=new Date().toLocaleString("it-IT")};return G(()=>{setTimeout(()=>{u.value=[{date:"2025-10-07",payments:[{type:"Carta di Credito",count:45,amount:2250.5},{type:"PayPal",count:22,amount:1100.75},{type:"Bonifico",count:8,amount:1600},{type:"Contanti",count:15,amount:450.25},{type:"Satispay",count:12,amount:360}]},{date:"2025-10-08",payments:[{type:"Carta di Credito",count:42,amount:2100.25},{type:"PayPal",count:20,amount:980.5},{type:"Bonifico",count:6,amount:1200},{type:"Contanti",count:18,amount:540.75},{type:"Satispay",count:14,amount:420}]},{date:"2025-10-09",payments:[{type:"Carta di Credito",count:48,amount:2400},{type:"PayPal",count:25,amount:1250.25},{type:"Bonifico",count:10,amount:2e3},{type:"Contanti",count:12,amount:360.5},{type:"Satispay",count:15,amount:450}]},{date:"2025-10-10",payments:[{type:"Carta di Credito",count:40,amount:2e3},{type:"PayPal",count:18,amount:900},{type:"Bonifico",count:5,amount:1e3},{type:"Contanti",count:20,amount:600},{type:"Satispay",count:10,amount:300}]},{date:"2025-10-11",payments:[{type:"Carta di Credito",count:50,amount:2500},{type:"PayPal",count:28,amount:1400},{type:"Bonifico",count:12,amount:2400},{type:"Contanti",count:10,amount:300},{type:"Satispay",count:18,amount:540}]}],u.value.length>0&&(r.value=u.value[u.value.length-1].date),h.value=new Date().toLocaleString("it-IT"),C.value=!1},1e3)}),(i,t)=>{const c=l("v-spacer"),s=l("v-select"),_=l("v-btn"),y=l("v-list-item"),z=l("v-list"),A=l("v-menu"),f=l("v-card"),b=l("v-col"),F=l("v-row"),N=l("v-card-item"),L=l("v-divider"),U=l("v-text-field"),E=l("v-skeleton-loader"),M=l("v-icon"),w=l("v-progress-linear"),j=l("v-data-table");return H(),R(f,null,{default:o(()=>[e(N,{class:"pa-4 pa-md-6"},{default:o(()=>[n("div",O,[t[5]||(t[5]=n("div",null,[n("h2",{class:"text-h5"},"Statistiche Metodi di Pagamento"),n("p",{class:"text-subtitle-1 text-medium-emphasis"},"Dati aggregati per giorno")],-1)),e(c),n("div",Q,[e(s,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),items:D.value,label:"Seleziona Giorno",density:"compact",variant:"outlined","hide-details":"",style:{"min-width":"240px"}},null,8,["modelValue","items"]),e(A,null,{activator:o(({props:a})=>[e(_,J({icon:"mdi-dots-vertical"},a,{title:"Altre azioni"}),null,16)]),default:o(()=>[e(z,null,{default:o(()=>[e(y,{onClick:B,"prepend-icon":"mdi-refresh"},{default:o(()=>t[2]||(t[2]=[x("Aggiorna")])),_:1}),e(y,{onClick:I,"prepend-icon":"mdi-file-delimited"},{default:o(()=>t[3]||(t[3]=[x("Esporta CSV")])),_:1}),e(y,{onClick:V,"prepend-icon":"mdi-file-pdf-box"},{default:o(()=>t[4]||(t[4]=[x("Esporta PDF")])),_:1})]),_:1})]),_:1})])]),e(F,{class:"mt-4"},{default:o(()=>[e(b,{cols:"12",sm:"6"},{default:o(()=>[e(f,{variant:"tonal",class:"pa-4 text-center h-100"},{default:o(()=>[t[6]||(t[6]=n("div",{class:"text-overline"},"Totale Transazioni",-1)),n("div",W,d(v.value.totalCount),1)]),_:1})]),_:1}),e(b,{cols:"12",sm:"6"},{default:o(()=>[e(f,{variant:"tonal",color:"success",class:"pa-4 text-center h-100"},{default:o(()=>[t[7]||(t[7]=n("div",{class:"text-overline"},"Importo Totale Incassato",-1)),n("div",X,d(P(v.value.totalAmount)),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(L),e(U,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=a=>p.value=a),label:"Cerca metodo di pagamento...","prepend-inner-icon":"mdi-magnify",variant:"solo-filled",flat:"","hide-details":"","single-line":""},null,8,["modelValue"]),e(j,{headers:T,items:k.value,search:p.value,loading:C.value,"item-value":"type",class:"elevation-0"},{loading:o(()=>[e(E,{type:"table-row@5"})]),"item.type":o(({item:a})=>[n("div",Y,[e(M,{icon:S(a.type),class:"me-3",size:"24"},null,8,["icon"]),n("span",null,d(a.type),1)])]),"item.countPercentage":o(({value:a})=>[n("div",Z,[e(w,{"model-value":a,color:"primary",height:"8",rounded:""},null,8,["model-value"]),n("span",$,d(a.toFixed(1))+"%",1)])]),"item.amount":o(({value:a})=>[n("span",tt,d(P(a)),1)]),"item.amountPercentage":o(({value:a})=>[n("div",et,[e(w,{"model-value":a,color:"success",height:"8",rounded:""},null,8,["model-value"]),n("span",ot,d(a.toFixed(1))+"%",1)])]),"no-data":o(()=>t[8]||(t[8]=[n("div",{class:"pa-4 text-center"},"Nessun dato trovato per la data selezionata.",-1)])),_:1},8,["items","search","loading"])]),_:1})}}}),it=K(nt,[["__scopeId","data-v-e2547530"]]);export{it as P};
